<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modo Individual - Quiz Cristiano</title>
    
    <!-- PWA Meta Tags -->
    <meta name="description" content="Modo Individual de Quiz Cristiano - Pon a prueba tu conocimiento bíblico">
    <meta name="theme-color" content="#ffd700">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Quiz Cristiano">
    
    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="assets/icons/icon-192.png">
    <link rel="apple-touch-icon" href="assets/icons/icon-192.png">
    <link rel="manifest" href="manifest.json">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700;900&family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/pages/safari-fixes.css">
    <link rel="stylesheet" href="css/pages/dark-mode.css">
    <link rel="stylesheet" href="css/pages/single-player-new.css">
</head>
<body>
    <div class="game-container">
        <!-- Header -->
        <header class="game-header">
            <button class="back-btn" onclick="window.location.href='index.html'" title="Volver al inicio" aria-label="Volver al inicio">
                <i class="fas fa-arrow-left"></i>
            </button>
            <div class="game-info">
                <h1 class="game-title">Quiz Cristiano</h1>
                <div class="phase-indicator" id="phase-indicator">
                    <span>Bienvenido</span>
                </div>
            </div>
            <div class="player-stats">
                <div class="coins-display">
                    <i class="fas fa-coins"></i>
                    <span id="player-coins">0</span>
                </div>
            </div>
        </header>

        <!-- Área Principal del Juego -->
        <main class="game-main">
            <!-- Pantalla de Bienvenida -->
            <div class="game-screen active" id="welcome-screen">
                <div class="welcome-content">
                    <!-- Mascota -->
                    <div class="mascot-container">
                        <img src="assets/images/mascota.png" alt="Joy" class="mascot-image" onclick="toggleSpeech()">
                        <div class="speech-bubble" id="speech-bubble">
                            <p class="speech-text">¡Hola! Soy Joy, tu guía en este viaje bíblico. ¿Listo para demostrar tu conocimiento de las Escrituras?</p>
                        </div>
                    </div>
                    
                    <div class="welcome-info">
                        <div class="game-rules">
                            <h2>¿Cómo Jugar?</h2>
                            <div class="rules-grid">
                                <div class="rule-item">
                                    <i class="fas fa-play-circle"></i>
                                    <p><strong>Fase Inicial:</strong> Responde 3 preguntas para clasificar</p>
                                </div>
                                <div class="rule-item">
                                    <i class="fas fa-th"></i>
                                    <p><strong>Categorías:</strong> Elige y completa 4 categorías bíblicas</p>
                                </div>
                                <div class="rule-item">
                                    <i class="fas fa-life-ring"></i>
                                    <p><strong>Rescate:</strong> Segunda oportunidad si fallas en una categoría</p>
                                </div>
                                <div class="rule-item">
                                    <i class="fas fa-trophy"></i>
                                    <p><strong>Victoria:</strong> Completa las 4 categorías para ganar</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="welcome-powerups">
                            <h3>Power-ups Disponibles</h3>
                            <div class="powerups-overview">
                                <div class="powerup-overview-item">
                                    <i class="fas fa-eraser"></i>
                                    <span>Eliminador</span>
                                </div>
                                <div class="powerup-overview-item">
                                    <i class="fas fa-clock"></i>
                                    <span>Tiempo Extra</span>
                                </div>
                                <div class="powerup-overview-item">
                                    <i class="fas fa-heart"></i>
                                    <span>Segunda Oportunidad</span>
                                </div>
                            </div>
                            <div class="powerups-note">
                                <small>💡 Compra power-ups en la tienda para mejorar tu rendimiento</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="welcome-buttons">
                        <button class="start-game-btn" onclick="startGame()">
                            <i class="fas fa-play"></i>
                            <span>Comenzar Juego</span>
                        </button>
                        <a href="index.html" class="back-to-home-btn">
                            <i class="fas fa-home"></i>
                            <span>Volver al Inicio</span>
                        </a>
                    </div>
                </div>
            </div>

            <!-- Pantalla de Preguntas CORREGIDA -->
            <div class="game-screen" id="question-screen">
                <div class="question-container">
                    <!-- ✅ TIMER SECTION CORREGIDA -->
                    <div class="timer-section" id="timer-section">
                        <div class="timer-info">
                            <div class="timer-circle" id="timer-circle">
                                <span class="timer-number" id="timer-number">20</span>
                            </div>
                            <div class="timer-text">
                                <div class="timer-phase" id="timer-phase">Pregunta</div>
                                <div class="timer-question" id="timer-question">1/3</div>
                            </div>
                        </div>
                        
                        <!-- ✅ POWER-UPS DENTRO DEL TIMER -->
                        <div class="powerups-compact" id="powerups-section">
                            <button class="powerup-btn" id="eliminate-btn" onclick="usePowerup('eliminate')" title="Eliminar 2 opciones incorrectas">
                                <i class="fas fa-eraser"></i>
                                <span class="powerup-count">0</span>
                            </button>
                            <button class="powerup-btn" id="time-btn" onclick="usePowerup('timeExtender')" title="Añadir 15 segundos">
                                <i class="fas fa-clock"></i>
                                <span class="powerup-count">0</span>
                            </button>
                            <button class="powerup-btn" id="rescue-btn" onclick="usePowerup('secondChance')" title="Segunda oportunidad">
                                <i class="fas fa-heart"></i>
                                <span class="powerup-count">0</span>
                            </button>
                        </div>
                    </div>

                    <!-- ✅ CONTENIDO DE PREGUNTA CORREGIDO -->
                    <div class="question-content">
                        <div class="bible-reference" id="bible-reference" style="display: none;"></div>
                        <div class="question-text">¿Cuál es la pregunta que aparecerá aquí?</div>
                        
                        <div class="answers-container" id="answers-container">
                            <!-- Las respuestas se cargan dinámicamente -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pantalla de Categorías -->
            <div class="game-screen" id="categories-screen">
                <div class="categories-content">
                    <!-- Contenido se carga dinámicamente -->
                </div>
            </div>

            <!-- Pantalla de Victoria -->
            <div class="game-screen" id="victory-screen">
                <div class="victory-content">
                    <div class="joy-victory">
                        <img src="assets/images/joy-festejo.png" alt="Joy celebrando" class="joy-victory-image">
                    </div>
                    <div class="victory-message">
                        <h2 class="victory-title">¡VICTORIA TOTAL!</h2>
                        <p class="victory-subtitle">¡Has completado todas las categorías!</p>
                        <div class="victory-description">
                            <p>Eres un verdadero conocedor de la Biblia</p>
                        </div>
                    </div>
                    <div class="victory-actions">
                        <button class="victory-btn primary" onclick="restartGame()">
                            <i class="fas fa-redo"></i> Jugar de Nuevo
                        </button>
                        <button class="victory-btn secondary" onclick="window.location.href='index.html'">
                            <i class="fas fa-home"></i> Volver al Inicio
                        </button>
                    </div>
                </div>
            </div>

            <!-- Pantalla de Game Over -->
            <div class="game-screen" id="gameover-screen">
                <div class="gameover-content">
                    <div class="joy-consoling">
                        <img src="assets/images/joy-consolando.png" alt="Joy consolando" class="joy-gameover-image">
                    </div>
                    <div class="gameover-message">
                        <h2 class="gameover-title">Game Over</h2>
                        <p class="gameover-subtitle">¡No te desanimes!</p>
                        <div class="gameover-description">
                            <p>Cada intento te acerca más a la maestría bíblica</p>
                        </div>
                    </div>
                    <div class="gameover-actions">
                        <button class="gameover-btn primary" onclick="restartGame()">
                            <i class="fas fa-redo"></i> Intentar de Nuevo
                        </button>
                        <button class="gameover-btn secondary" onclick="window.location.href='index.html'">
                            <i class="fas fa-home"></i> Volver al Inicio
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <a href="index.html" class="nav-item">
                <i class="fas fa-home"></i>
                <span>Inicio</span>
            </a>
            <a href="single-player-new.html" class="nav-item active">
                <i class="fas fa-play"></i>
                <span>Jugar</span>
            </a>
            <a href="ranking.html" class="nav-item">
                <i class="fas fa-trophy"></i>
                <span>Ranking</span>
            </a>
            <a href="logros.html" class="nav-item">
                <i class="fas fa-medal"></i>
                <span>Logros</span>
            </a>
            <a href="store.html" class="nav-item">
                <i class="fas fa-store"></i>
                <span>Tienda</span>
            </a>
        </nav>
    </div>

    <!-- Scripts principales -->
    <script src="js/modules/gamedatamanager.js"></script>
    <script src="js/modules/dark-mode.js"></script>
    <script src="js/pages/single-player-new.js"></script>

    <!-- Script específico del HTML -->
    <script>
        let speechVisible = false;
        
        window.toggleSpeech = function() {
            const speechBubble = document.getElementById('speech-bubble');
            if (speechBubble) {
                speechVisible = !speechVisible;
                if (speechVisible) {
                    speechBubble.classList.add('show');
                } else {
                    speechBubble.classList.remove('show');
                }
            }
        };
        
        // Debug y verificación
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🎮 Single Player HTML cargado');
            
            const criticalElements = [
                'welcome-screen', 'question-screen', 'categories-screen',
                'victory-screen', 'gameover-screen', 'timer-section',
                'powerups-section', 'answers-container'
            ];
            
            criticalElements.forEach(id => {
                const element = document.getElementById(id);
                console.log(`${element ? '✅' : '❌'} Elemento ${id}:`, !!element);
            });
        });
    </script>
</body>
</html>